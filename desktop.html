<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        if (navigator.userAgent.match(/Android|iPhone|iPod|BlackBerry|Windows Phone/i)) {
            window.location.href = "/";
        }
    </script>
        <meta charset="UTF-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex">
        <title>LeafMatch</title>
        <link rel="preload" href="images/ui/loadingwithbg.png" as="image">
        <link rel="stylesheet" href="css/desktopstyles.css">
        <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    </head>
    <body onload="endLoadingScreen()">
        
        <div id="loadingscreen" class="loadingscreen">
            <img src="images/ui/loading.png" id="loader" class="loader" alt="Loading...">
        </div>
        <img src="images/ui/loadingwithbg.png" id="smallloader" class="smallloader" alt="Loading...">
        
        <img draggable="false" onclick="acceptedPhoto()" src="images/ui/tick.png" alt="accept" class="tick" id="tick">
        <img draggable="false" onclick="retakePhoto()" src="images/ui/cross.png" alt="retake" class="cross" id="cross">
        

        <div id="prompt" class="prompt">
            <h1>We need your camera for this!</h1>
            <p>In order for LeafMatch to properly work, we need access to your camera. 
            <br>If choose not to allow camera access, you can use the upload button to upload an image for scanning.</p>
            <button onclick="promptAccepted()">Give access</button>
            <button onclick="promptClose()">No thanks</button>
        </div>
        
        <div id="denied" class="prompt">
            <h1>Camera Blocked :(</h1>
            <p>You have camera access disabled for this site. To take pictures for scanning, please allow access or use the upload files button.
            <br>You may need to reload the page for permission changes to take effect</p>
            <button onclick="deniedClose()">Okay</button>
        </div>

        <div id="failed" class="failed">
            <h1>Couldn't Identify Object</h1>
            <p>Our AI couldn't tell what the photo was of, try getting a better angle or focus on important elements</p>
            <button onclick="retakePhoto()">Okay</button>
        </div>
            
        
        <img id="nocamera" class="nocamera" src="images/ui/nocamera.jpg" alt="nocamera">
        <img class="nocameraback" src="images/ui/nocamera.jpg" id ="nocameraback" alt="nocamera">
        
        <img src="images/ui/Leaf.png" alt="leaf" class="leafimage">
        <img src="images/ui/Leaf.png" alt="leaf" class="leafimage1">
        <img src="images/ui/Leaf.png" alt="leaf" class="leafimage2">
            
        <div class="video-wrapper">
            <canvas id="canvas" style="display:none;"></canvas>
            <video id="video" autoplay playsinline muted></video>
            <img id="photo" class="photo">
        </div>

        <div class="sidebar">
            <div style="display: flex; justify-content: center;">
                <a><img src="images/ui/logo.png" style="width: 55%;" alt="Leafmatch logo" class="Leafmatch logo"></a> 
            </div>
            <input type="search" name="search" placeholder="Search" id="sidebarSearch" class="ubuntu"> 
            <a class="active" href="desktop">Scan</a>
            <a href="database">Database</a>
            <a href="download">Download</a>
            <a href="help">Help</a>
            <a href="about">About us</a>
        </div>
        
        <img draggable="false" src="images/ui/takepicture.png" alt="Take photo" onclick="takePhoto();flash()" class="takephotoimage" id="birb">
        <img draggable="false" src="images/ui/addfilesbutton.png" alt="Upload from gallery" onclick="uploadstart()" class="uploadimage" id="uploadbutton">
        <input type="file" id="fileInput" accept="image/*" style="display:none;" onchange="upload()">

        <script src="scripts/desktopscripts.js"></script>
        <script src="scripts/search.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
        <script src="/scripts/ai.js"></script>
    </body>
</html>
